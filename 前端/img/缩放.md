# 图片等比缩放

## 一般情况下

宽度固定的情况下，不指定高度就会表现成高度自适应，

## 当父级 div 为 display:flex 时

这个时候发现指定图片固定宽度，高度自适应时实际高度表现为其原始高度。

这个时候设置图片的高度为 100% 就可以解决问题。至于为什么这样 晚上再看吧




    let content = this.contentInput.value
    let length = content.length
    if(length > 500){
      this.contentInput.value = content.substring(0,500)
      this.showShortToast("内容长度过长")
    }else{
      this.setState({inputLength:length})
    }





    <div className="w23per" style={{margin:"2%"}} onClick={() =>{
      this.inputUpload.value = ""
      this.inputUpload.click()}} >
        <img className="w100 h100" src={require("../../../img/img_upload.png")} />
        <form className="uhide" encType="multipart/form-data" target="uploadBox" method="post">
          <input type="file" name="attach" multiple="multiple"
          accept="image/*"
          ref={(ref) => {this.inputUpload = ref}} onChange={(e) => {
            let thas = this;
            console.log(e.target.files)
            for (const file of e.target.files) {
              lrz(file,{fieldName: "attach"})
                  .then(function (rst) {
                    // 处理成功会执行
                    let files = thas.state.filesList
                    files.push(rst)
                    thas.setState(Object.assign({},thas.state,{filesList:files}))
                  }).catch(function (err) {
                    // 处理失败会执行
                  }).always(function () {
                     // 不管是成功失败，都会执行
                  });
            }
          }}/>
        </form>
    </div>